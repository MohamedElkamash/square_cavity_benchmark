#Parameters
${L = 1}
${H = 1}
${delta = 0.05}
${n = 4}
${r = 1.2}
${t0 = delta * (1-r) / (1-r^n)}
${s = t0*r^n}


reset

#Geometry
create surface rectangle width {L} height {H} yplane 
move Surface 1  x {L/2} z {H/2} include_merged 

#Boundary layers
create boundary_layer 1
modify boundary_layer 1 uniform height {t0} growth {r} layers {n} 
modify boundary_layer 1 add curve 1 surface 1 curve 2 surface 1 curve 3 surface 1 curve 4 surface 1 
modify boundary_layer 1 continuity on

#mesh
surface 1 size auto factor {s}
mesh surface 1
sweep surface 1  perpendicular distance {s}  include_mesh  keep 
compress all

#blocks
block 1 add volume 2 
block 1 name "cavity"

#sidesets
sideset 1 add surface 4
sideset 1 name "left"
sideset 2 add surface 2
sideset 2 name "right"
sideset 3 add surface 7  
sideset 3 name "back"
sideset 4 add surface 6  
sideset 4 name "front"
sideset 5 add surface 5  
sideset 5 name "bottom"
sideset 6 add surface 3  
sideset 6 name "top"